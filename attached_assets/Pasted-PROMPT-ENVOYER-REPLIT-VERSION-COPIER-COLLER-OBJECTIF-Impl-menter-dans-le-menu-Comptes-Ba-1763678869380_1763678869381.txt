PROMPT Ã€ ENVOYER Ã€ REPLIT (VERSION COPIERâ€“COLLER)

OBJECTIF :
ImplÃ©menter dans le menu Comptes Bancaires â†’ modal Ajouter un compte
un systÃ¨me professionnel permettant Ã  lâ€™utilisateur de trouver sa banque en tapant quelques lettres, avec une base de banques mondiale propre et optimisÃ©e (Europe, USA, Canada, Asie, AmÃ©rique Latine, OcÃ©anie, Moyen-Orient â€” hors Afrique).
Chaque banque doit fournir nom + BIC et permettre la saisie dâ€™un IBAN validÃ© par pays.

ğŸš€ Ã€ IMPLÃ‰MENTER
1ï¸âƒ£ Base de donnÃ©es banques mondiales (hors Afrique)

CrÃ©er un fichier :

client/src/data/banks.ts


Contenant une structure :

export interface Bank {
  id: string;
  name: string;
  country: string;
  bic: string;
  ibanFormat: string;  // regex ou pattern exemple "FRkk XXXX XXXX XXXX XXXX XXXX XXX"
}

export const BANKS: Bank[] = [
  // Europe (exemples)
  { id: "fr-bnp", name: "BNP Paribas", country: "FR", bic: "BNPAFRPP", ibanFormat: "FR\\d{2}\\d{10}\\d{11}\\d{2}" },
  { id: "fr-socgen", name: "SociÃ©tÃ© GÃ©nÃ©rale", country: "FR", bic: "SOGEFRPP", ibanFormat: "FR\\d{25}" },

  // USA (exemples)
  { id: "us-chase", name: "JP Morgan Chase", country: "US", bic: "CHASUS33", ibanFormat: "" },

  // Canada
  { id: "ca-rbc", name: "Royal Bank of Canada", country: "CA", bic: "ROYCCAT2", ibanFormat: "" },

  // Asie
  { id: "jp-mizuho", name: "Mizuho Bank", country: "JP", bic: "MHCBJPJT", ibanFormat: "" },

  // AmÃ©rique du Sud, OcÃ©anie, Moyen-Orient, etc.
  
  // â€¦
];


ğŸ‘‰ NOTE IMPORTANTE :
Tu dois complÃ©ter automatiquement cette liste avec les ~500 banques principales mondiales via une source publique (SWIFT/BIC registry).
Ne pas inclure les banques africaines.

2ï¸âƒ£ Recherche intelligente (auto-complete)

Dans le modal â€œAjouter un compte bancaireâ€, remplacer le champ Banque par :

ğŸ” Champ de recherche avec filtrage dynamique

Debounce 150ms

Normalisation accents + minuscules

Suggestion instantanÃ©e

Max 8 rÃ©sultats

SÃ©lection avec click ou clavier

Exemple de logique :

function searchBanks(query: string): Bank[] {
  const q = query.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
  return BANKS.filter(b => 
    b.name.toLowerCase().includes(q) ||
    b.country.toLowerCase().includes(q)
  ).slice(0, 8);
}

3ï¸âƒ£ SÃ©lection dâ€™une banque â†’ auto-remplissage BIC

Une fois quâ€™un utilisateur clique sur une banque :

setSelectedBank(bank);
setValue("bic", bank.bic);


Le champ BIC devient verrouillÃ© (readOnly) car dÃ©fini par la banque.

4ï¸âƒ£ Formatage & Validation de lâ€™IBAN

Utiliser la propriÃ©tÃ© ibanFormat de chaque banque.

ğŸ”§ ImplÃ©mentation :

function validateIban(iban: string, bank: Bank) {
  const regex = new RegExp("^" + bank.ibanFormat + "$");
  return regex.test(iban.replace(/\s+/g, "").toUpperCase());
}


Si invalide â†’ message dâ€™erreur immÃ©diat

Espacement automatique : FR76 1234 1234 1234 1234 1234 123

5ï¸âƒ£ UI dans le modal
âœ… Propositions UI (simples et fintech, pas extravagantes)

Champ de recherche en haut

Liste des suggestions sous forme de dropdown

Ligne de sÃ©paration fine

Logo gÃ©nÃ©rique banque (icÃ´ne Bank) devant chaque rÃ©sultat

Quand sÃ©lectionnÃ© â†’ badge â€œBanque sÃ©lectionnÃ©e : BNP Paribas (FR)â€

6ï¸âƒ£ Sauvegarde en base

Dans la requÃªte API POST /banks/add :

Envoyer :

{
  "bankName": "BNP Paribas",
  "bankCountry": "FR",
  "iban": "FR761234....",
  "bic": "BNPAFRPP"
}

ğŸ“Œ Jâ€™attends de toi :

GÃ©nÃ©rer automatiquement un fichier banks.ts complet avec les banques mondiales (hors Afrique).

ImplÃ©menter le champ de recherche intelligent dans le modal â€œAjouter un compteâ€.

Auto-remplir BIC + validation IBAN.

UI propre et fintech.

VÃ©rifier que tout fonctionne sur Vercel (altusfinancesgroup.com) et le backend Render (api.altusfinancesgroup.com).

ğŸ¯ RÃ©sultat final attendu

âœ“ Lâ€™utilisateur commence Ã  taper â€œSoâ€¦ â†’ SociÃ©tÃ© GÃ©nÃ©rale apparaÃ®tâ€
âœ“ Il clique â†’ BIC auto-rempli
âœ“ Il saisit un IBAN â†’ Validation auto en temps rÃ©el
âœ“ Sauvegarde propre â†’ Banque apparaÃ®t dans Comptes Bancaires

âœ”ï¸ FIN DU PROMPT Ã€ ENVOYER Ã€ REPLIT